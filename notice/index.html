<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>RIDI Notice</title>
  <link rel="stylesheet" href="//npmcdn.com/flickity@2.0.2/dist/flickity.min.css" media="screen">
  <style>
    * {
      padding: 0;
      margin: 0;
    }

    .carousel {
      height: 100vh;
    }

    .carousel-cell {
      height: 100vh;
      width: 100%;
    }

    .carousel-cell img {
      width: 100%;
    }

    /* move page dots into carousel */
    .flickity-page-dots {
      bottom: 10px;
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
  <script src="//npmcdn.com/flickity@2.0/dist/flickity.pkgd.min.js"></script>
</head>
<body>
<script>
  const baseUrl = './images/';

  function loadImage(index, html) {
    const filename = (index + 100).toString().substr(1, 2) + '.png';
    const image_url = baseUrl + filename + '?' + Date.now().toString();

    $.get(image_url)
      .done(function () {
        html += `<div class="carousel-cell"><img src="${image_url}" alt=""></div>`;
        loadImage(index + 1, html);
      })
      .fail(function () {
        renderCarousel(html);
      });
  }

  function renderCarousel(html) {
    $('body').empty();
    $(`<div class="carousel">`)
      .appendTo('body')
      .html(html)
      .flickity({
        "autoPlay": 3000,
        "setGallerySize": false,
        "wrapAround": true,
        "pauseAutoPlayOnHover": false,
        "prevNextButtons": false
      });

    setTimeout(() => loadImage(1, ''), 1000 * 60 * 5);
  }

  loadImage(1, '');
</script>
</body>
</html>
